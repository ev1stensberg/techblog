<!DOCTYPE html><html lang=en><head><meta charset=UTF-8><title>TeliaSonera TechBlog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=https://nettbutikk.netcom.no/img/favicon.ico><link rel=stylesheet href=/tech-blog/css/style.css><link rel=alternate type=application/rss+xml title="TeliaSonera TechBlog" href=/tech-blog/rss.xml></head><body><div class=site-wrap><header class="site-header px2 px-responsive"><div class="mt2 wrap"><div class=measure><a href="/tech-blog/" class=site-title>TeliaSonera TechBlog</a><nav class="site-nav right"><a href=/tech-blog/projects>About</a> <a href=http://teliasonera.com>TeliaSonera</a></nav><div class=clearfix></div></div></div></header><div class="post p2 p-responsive wrap" role=main><div class=measure><div class=post><header class="post-header mb2"><h1>Upgrade or not to upgrade? The eternal dilemma</h1><span class=post-meta>Oct 20, 2015</span><br><span class="post-meta small"><a href=/tech-blog/tags/nettbutikk title=nettbutikk>nettbutikk</a>, <a href=/tech-blog/tags/experience title=experience>experience</a>, <a href=/tech-blog/tags/development title=development>development</a>, <a href=/tech-blog/tags/learning title=learning>learning</a></span> <img src="" alt="bilde"></header><article class="post-content py2"><p><em>A part of the <a href=/tech-blog/tags/nettbutikk>series Nettbutikk Team&#39;s Experiences and Experiments</a></em></p><p>Handling dependencies is one of important challenges in any software project - and especially in the fast-moving JavaScript world. Our <a href=nettbutikk.netcom.no>Nettbutikk</a> team just had a heated discussion about handling upgrades of our dependencies that continuous our learning journey lined with failures (or rather &quot;experiments that generated new knowledge&quot; :-)).</p><h2 id=failed-attempt-one-let-tools-do-it>Failed attempt one: Let tools do it</h2><p>Originally we let <code>npm</code> automatically do minor upgrades but that turned out to be problematic as even minor version changes can introduce bugs and having potentially different (minor) versions on our different machines and in production makes troubleshooting difficult.</p><p>Also, this only takes care about minor version changes. When we decided to do the bigger updates, we had a lot of work and testing to do, making sure all the new versions work together. Troubleshooting of upgrade problems was difficult since many libraries were changed at once so pinpointing the source of a new defect was nontrivial.</p><h2 id=failed-attempt-two-let-a-human-do-it>Failed attempt two: Let a human do it</h2><p>Next we decided to freeze the library versions completely and let the one of us that had the operations role that week run <code>npm outdated</code>, update all dependencies, and verify everything still worked.</p><p>Thus we ensured that we were almost always up-to-date and that we typically had only a small job to do, with just a small potential for problems. However it wasn&#39;t frictionless either. It might require one or few hours (for proper testing and occasional troubleshooting) every week, a time we would have rather used on creating new value. And sometimes the upgrade did introduce problems - some spot and fixed immediately, but some taking more time to discover and fix. Once it took two weeks to find out that something broke due to a <code>Reflux</code> upgrade - and finding out that the cause was the upgrade wasn&#39;t easy.</p><h2 id=new-experiment-upgrade-as-needed>New experiment: Upgrade as-needed</h2><p>Our reliable though-challenger Alex pointed out that upgrades give us typically little value at a relatively high cost. So we have decided to try not upgrading libraries unless we would have a good reason to do it (such as a known security problem or a new functionality we want). It is obviously not optimal and the upgrades might be big and painful but we will try it for a while and evaluate how it works for us.</p><h2 id=conclusion>Conclusion</h2><p>Handling and upgrading dependencies is difficult and costly. It&#39;s important to evaluate the cost-benefit ration and experiment to find the &quot;least bad&quot; approach and balance for a particular team. Development is fun.</p></article></div></div></div></div><footer class=footer><div class="p2 wrap"><div class="measure mt1 center"><p><small>Do you want to know more? <a href=https://netcom.no/disrupt-us>Work with us!</a></small></p><small>Made by TeliaSonera Norge AS</small></div></div></footer><script src=/tech-blog/js/scripts.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-65719787-2', 'auto');
  ga('send', 'pageview');</script></body></html>